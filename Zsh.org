#+title: Zsh setup

I mainly use Emacs' Eshell, but when I do find myself in Zsh I don't
want to be without these aliases.

#+begin_src sh :tangle ~/.zshrc
alias dc=docker-compose
alias dcl='docker-compose logs --follow --tail 10'
alias dcu=docker-compose up -d
alias ff=emacsclient
alias dps="docker ps --format 'table {{.Names}}\t{{.Status}}\t{{.Ports}}'"

# Set up Nix stuff
if [ -e /etc/static/zshrc ]; then
    . /etc/static/zshrc
fi
#+end_src

#+begin_src sh :tangle ~/.zshenv
export EDITOR=emacsclient
export JAVA_HOME=$(/usr/libexec/java_home -v 1.8)

# Emacs can't find pdflatex without this, for some reason. This
# *should* be handled by system setup, but I don't have time to debug
# why it's not working at the moment. I hope to look into it again
# after the upgrade to Big Sur.
if [ -x /usr/libexec/path_helper ]; then
        eval `/usr/libexec/path_helper -s`
fi

# For interacting with backup snapshots using restic
export RESTIC_REPOSITORY="s3:s3.amazonaws.com/brautaset-backups"
export RESTIC_PASSWORD_COMMAND="security find-generic-password -s restic -w"

# For NVM
export NVM_DIR="$HOME/.nvm"
[ -s "/usr/local/opt/nvm/nvm.sh" ] && . "/usr/local/opt/nvm/nvm.sh" && nvm use default --silent

# Set up nix
if [ -e /Users/stig/.nix-profile/etc/profile.d/nix.sh ]; then
    . /Users/stig/.nix-profile/etc/profile.d/nix.sh
fi
#+end_src
